<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.effect.DropShadow?>
<?import javafx.scene.effect.InnerShadow?>
<?import javafx.geometry.Insets?>
<?import java.lang.String?>
<?import javafx.scene.paint.Color?>

<AnchorPane xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="gui.UserViewController"
            prefHeight="800.0" prefWidth="1200.0" minHeight="600.0" minWidth="900.0" maxHeight="-1.0" maxWidth="-1.0"
            style="-fx-background-color: #f8fafc;"
            stylesheets="@backborad.css">
    <children>
        <!-- Top Bar -->
        <fx:include fx:id="adminBar" source="AdminBar.fxml"/>
        <!-- Sidebar under Top Bar -->
        <VBox spacing="0" prefWidth="200" style="-fx-background-color: #00b4d8; -fx-background-radius: 0 24 24 0; -fx-padding: 36 0 0 0; -fx-min-width: 200; -fx-max-width: 200; -fx-pref-width: 200;" AnchorPane.leftAnchor="0.0" AnchorPane.topAnchor="60.0" AnchorPane.bottomAnchor="0.0">
            <VBox alignment="CENTER" spacing="16" style="-fx-padding: 0 0 20 0;">
                <Label text="Navigator Bar" styleClass="sidebar-title" style="-fx-font-size: 30px; -fx-font-family: 'Serif'; -fx-font-weight: bold; -fx-text-fill: #fff; -fx-padding: 16 0 24 0;" alignment="CENTER" />
            </VBox>
            <Separator style="-fx-background-color: #314060;"/>
            <VBox spacing="8" style="-fx-padding: 20 0 0 0;">
                <Button text="User Dashboard" styleClass="sidebar-link" onAction="#goToAdminHome" />
                <Button text="Add User" styleClass="sidebar-link" onAction="#goToCreateUser" />
                <Button text="User Table" styleClass="sidebar-link" onAction="#goToUserView" />
                <Button text="Logout" styleClass="sidebar-link" onAction="#logout" />
            </VBox>
        </VBox>
        <!-- Main Content Area under Top Bar and Sidebar -->
        <VBox spacing="20" AnchorPane.leftAnchor="200.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="60.0" AnchorPane.bottomAnchor="0.0" style="-fx-padding: 30 40 30 40;">
            <!-- Header with title -->
            <HBox alignment="CENTER_LEFT" style="-fx-padding: 0 0 20 0;">
                <Label text="ðŸ‘¤ User Management"
                       style="-fx-text-fill: #314060; -fx-font-size: 28px; -fx-font-weight: bold;" />
                <Pane HBox.hgrow="ALWAYS"/>
            </HBox>

            <!-- Search and filters -->
            <HBox alignment="CENTER_LEFT" spacing="15">
                <TextField fx:id="searchField" promptText="Search users..."
                           HBox.hgrow="ALWAYS"
                           style="-fx-background-color: #fff; -fx-background-radius: 20px; -fx-prompt-text-fill: #b0b8c9; -fx-font-size: 15px; -fx-padding: 8px 15px; -fx-border-color: #00b4d8; -fx-border-width: 1px; -fx-border-radius: 20px;" />
                <ChoiceBox fx:id="sortChoiceBox" HBox.hgrow="NEVER"
                           style="-fx-background-color: #fff; -fx-background-radius: 10; -fx-padding: 8; -fx-font-size: 15px; -fx-border-color: #00b4d8; -fx-border-width: 1px; -fx-border-radius: 10; -fx-min-width: 200;" />
            </HBox>

            <!-- List container -->
            <VBox spacing="0" VBox.vgrow="ALWAYS">
                <ListView fx:id="userList" VBox.vgrow="ALWAYS"
                         style="-fx-background-color: #fff;
                               -fx-border-color: transparent;
                               -fx-control-inner-background: #fff;
                               -fx-selection-bar: #00b4d8;
                               -fx-selection-bar-non-focused: #b0b8c9;
                               -fx-cell-size: 60px;
                               -fx-padding: 5px;"/>
            </VBox>

            <!-- Action buttons -->
            <HBox alignment="CENTER_LEFT" spacing="24">
                <Button text="âœï¸ Edit" onAction="#handleEditUser"
                        style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-font-size: 18px; -fx-background-radius: 10; -fx-font-weight: bold; -fx-padding: 8px 32px;"/>
                <Button text="ðŸ—‘ï¸ Delete" onAction="#handleDeleteUser"
                        style="-fx-background-color: #43bfae; -fx-text-fill: white; -fx-font-size: 18px; -fx-background-radius: 10; -fx-font-weight: bold; -fx-padding: 8px 32px;"/>
                <Button text="ðŸ”’ Block/Unblock" onAction="#handleBlockUser"
                        style="-fx-background-color: #d32f2f; -fx-text-fill: white; -fx-font-size: 18px; -fx-background-radius: 10; -fx-font-weight: bold; -fx-padding: 8px 32px;"/>
            </HBox>
        </VBox>
    </children>
</AnchorPane>